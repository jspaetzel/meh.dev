<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  
  <title>Rendering React via a Symfony Twig Extension</title>
  <meta name="description" content="Looking for an easier way to render individual React components from Twig? Here’s what I came up with on a recent project using a Twig Extension.The project ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/prism.css">

  <link rel="canonical" href="https://meh.dev/render-react-component-twig">
  <link rel="alternate" type="application/rss+xml" title="meh.dev" href="https://meh.dev/feed.xml">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5647176622308419"
          crossorigin="anonymous"></script>
</head>

  <body class="place-items-center min-h-screen">
    <div class="mx-2 xl:max-w-7xl grid">
      <nav class="flex items-center justify-between py-3">
        <div class="flex items-center space-x-3">
  <a class="site-title flex items-center space-x-2" href="/">
    <img src="https://0.gravatar.com/avatar/ccf00de89ec54577fb9fd612358a9808?s=56" class="h-10 w-auto">
    <span>meh.dev</span>
  </a>
</div>
<div class="flex space-x-6">
  <a class="page-link" href="/cv">CV</a>
  <a class="page-link" href="/archive">Archive</a>
</div>

      </nav>
      <div class="content-style-green prose prose-sm sm:prose-base md:prose-md prose-img:rounded-xl xl:max-w-5xl md:max-w-3xl mx-auto">
        

<article itemscope itemtype="http://schema.org/BlogPosting">
  <h1 class="p-2 xs:p-1" itemprop="name headline">Rendering React via a Symfony Twig Extension</h1>
  <header class="post-header">
    
    <div class="post-meta shadow-md">
    
    
    
      <div class="post-meta-text">
        <div class="post-meta-icon">
          <i class="far fa-calendar"></i>
        </div>
        Posted on
        <time datetime="2024-04-01T02:16:40+00:00" itemprop="datePublished">
          Apr 01, 2024
        </time>
      </div>
    
    </div>

    
    <ul class="tag-list">
      
      <li class="inline"><a class="tag-list-link shadow-md" href="/tag/PHP">PHP</a></li>
      
      <li class="inline"><a class="tag-list-link shadow-md" href="/tag/Symfony">Symfony</a></li>
      
      <li class="inline"><a class="tag-list-link shadow-md" href="/tag/Twig">Twig</a></li>
      
      <li class="inline"><a class="tag-list-link shadow-md" href="/tag/React">React</a></li>
      
    </ul>
    
  </header>

  <div class="p-4" itemprop="articleBody">
    <p>Looking for an easier way to render individual React components from Twig? Here’s what I came up with on a recent project using a Twig Extension.</p>

<p>The project &amp; samples were written using Symfony 6 with Encore and Webpack.</p>

<h1 id="configure-an-entrypoint-in-webpack--encore">Configure an Entrypoint in Webpack &amp; Encore</h1>
<p>The entry script must be loaded on any page you want to render a component. You can create a single bundle and reuse it across many components and pages, or create multiple bundles.</p>

<p>In my application and this example I use a shared <code>components</code> bundle which can be accessed on any page.</p>

<p>Add an entrypoint to your <code>webpack.config.js</code>.</p>
<pre><code class="language-javascript">.addEntry('components', './assets/components.tsx')
</code></pre>

<p>Load the bundle on a page (or entire layout). This uses Encore inside a Twig file.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">{{ encore_entry_script_tags(&#39;components&#39;) }}</code></pre></figure>

<h1 id="create-componentstsx">Create components.tsx</h1>
<p>Create the components.tsx and add each component you want to load to the <code>componentMap</code> variable.</p>

<pre><code class="language-javascript">import React from 'react';
import ReactDOM from 'react-dom';

import EmbedModal from "./components/EmbedModal";

const componentMap = {
    'EmbedModal': EmbedModal,
};

function getComponentByName(componentName: string) {
    const Component = componentMap[componentName];
    if (Component) {
        return Component;
    } else {
        console.error(`Unknown component: ${componentName}`);
    }
}

document.querySelectorAll('.react-container').forEach(container =&gt; {
    // @ts-ignore
    const componentName = container.dataset.component;
    // @ts-ignore
    const props = JSON.parse(container.dataset.props);

    const Component = getComponentByName(componentName);
    ReactDOM.render(&lt;React.StrictMode&gt;&lt;Component {...props} /&gt;&lt;/React.StrictMode&gt;, container);
});
</code></pre>

<p>This example is fairly naive, you could make the componentMap more magical if you’d like, but for a small number of components it’s easy to manage them manually.</p>

<h1 id="create-the-twigextension">Create the TwigExtension</h1>

<pre><code class="language-php">&lt;?php

namespace App\Twig;

use Twig\Extension\AbstractExtension;
use Twig\TwigFunction;

class TwigExtension extends AbstractExtension
{
    public function getFunctions()
    {
        return [
            new TwigFunction('renderReactComponent', [$this, 'renderReactComponent'], ['is_safe' =&gt; ['html']]),
        ];
    }

    public function renderReactComponent($componentName, $props = null): string
    {
        if (is_null($props)) {
            $props = [];
        }
        $prop_str = json_encode($props);
        $prop_str = htmlspecialchars($prop_str, ENT_QUOTES, 'UTF-8');

        return &lt;&lt;&lt;HTML
                &lt;div class="react-container inline" data-component="{$componentName}" data-props="{$prop_str}"&gt;&lt;/div&gt;
            HTML;
    }
}

</code></pre>

<p>Make sure your extension is loaded by Symfony, this might happen automatically or you may have to add the service manually.</p>

<h1 id="render-a-component">Render a Component</h1>
<p>Now you’re ready to render! Call the Twig extension anywhere in your twig files where you want a react component to appear.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">{{ renderReactComponent(&#39;EmbedModal&#39;, {
        &#39;name&#39;: event.name,
        &#39;embed_url&#39;: event.getEmbedUrl(),
}) }}</code></pre></figure>


    

    
    
  </div>

  

  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
    this.page.url = "https://meh.dev/render-react-component-twig";
    this.page.identifier = '/render-react-component-twig';
  };
  (function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://jspaetzel.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view comments</noscript>
  <script id="dsq-count-scr" src="//jspaetzel.disqus.com/count.js" async></script>
</article>


      </div>
      <footer class="footer">
        <div class="copyright">© 2025  <i class="fas fa-heart"></i>  John Spaetzel</div>

<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Josefin Sans', 'Noto Sans', 'Roboto Mono', 'Material Icons']
    }
  });
</script>
<script src="https://kit.fontawesome.com/ea17bff308.js" crossorigin="anonymous"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W3G88JG6ZH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W3G88JG6ZH');
</script>
<script src="/js/prism.js"></script>

      </footer>
    </div>
  </body>
</html>
